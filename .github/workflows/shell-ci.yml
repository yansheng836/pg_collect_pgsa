name: Shell Script Syntax Check

on:
  push:
    paths:
      - '**.sh'
  pull_request:
    paths:
      - '**.sh'

jobs:
  shellcheck:
    name: Shell Script Syntax Validation
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Install ShellCheck
        run: |
          sudo apt-get update
          sudo apt-get install -y shellcheck
          
      - name: Run ShellCheck on all scripts
        run: |
          # æ£€æŸ¥æ‰€æœ‰ .sh æ–‡ä»¶
          for script in *.sh; do
            echo "ğŸ” Checking $script with ShellCheck..."
            shellcheck -x "$script"
          done
          
          # æ£€æŸ¥åŒ…å« shell è„šæœ¬çš„å…¶ä»–æ–‡ä»¶
          if grep -rI '^#!/bin/bash' .; then
            grep -rIl '^#!/bin/bash' . | while read -r file; do
              echo "ğŸ” Checking $file with ShellCheck..."
              shellcheck -x "$file"
            done
          fi